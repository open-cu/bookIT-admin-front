<header class="page-header">
  <p class="h1 page-title">Тикеты</p>
  <button tuiButton appearance="info" class="btn create-item-btn">Создать тикет</button>
</header>
<app-filter-block
  [fields]="fields"
  filterText="Найти тикет"
  title="Поиск по тикетам"
></app-filter-block>

<div class="table-container">
  <tui-loader
    [overlay]="true"
    [showLoader]="(loading$ | async) ?? false"
  >
    <table
      tuiTable
      class="table"
      [columns]="columns"
    >
      <thead>
      <tr tuiThGroup>
        @for (column of columns; track $index) {
          <th tuiTh [resizable]="true">{{ column }}</th>
        }
      </tr>
      </thead>
      @let data = (tickets$ | async)?.content ?? [];
      <tbody tuiTbody [data]="data">
        @for (item of data; track $index) {
          <tr tuiTr>
            @for (value of getEntries(item); track $index) {
              <td
                *tuiCell="value[0]"
                tuiTd
              >{{ value[1] }}</td>
            }
          </tr>
        }
      </tbody>
      <tfoot>
        <tr>
          <td [colSpan]="columns.length">
            <tui-table-pagination
              class="tui-space_top-2"
              [page]="(page$ | async) ?? 0"
              [size]="(size$ | async) ?? 0"
              [total]="(total$ | async) ?? 0"
              (paginationChange)="onPagination($event)"
            />
          </td>
        </tr>
      </tfoot>
    </table>
  </tui-loader>
</div>
